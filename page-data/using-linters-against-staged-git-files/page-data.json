{"componentChunkName":"component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx","path":"/using-linters-against-staged-git-files","result":{"pageContext":{"article":{"id":"478ad046-228d-54b4-93c3-ecc63576d25c","slug":"/using-linters-against-staged-git-files","secret":false,"title":"Using linters against staged git files","author":"Chris Williams","date":"February 5th, 2020","dateForSEO":"2020-02-05T00:00:00.000Z","timeToRead":1,"excerpt":"Automating pre-commit hooks and linting staged git files.","canonical_url":null,"subscription":true,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Using linters against staged git files\",\n  \"author\": \"Chris Williams\",\n  \"date\": \"2020-02-05T00:00:00.000Z\",\n  \"hero\": \"./images/banking-business-checklist-commerce-416322.jpg\",\n  \"excerpt\": \"Automating pre-commit hooks and linting staged git files.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"After annoying myself many many times what a build fails on a CI server went there are simple linting failures, I decided to do a bit of research to see if it could be automated for staged files before commit.\"), mdx(\"p\", null, \"I\\u2019ve been using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prettier\"), \" in Visual Code Studio for some time and liked it, but it does rely on every developer within the project setting things up.\"), mdx(\"h2\", {\n    \"id\": \"pre-commit-checks\"\n  }, \"pre-commit checks\"), mdx(\"p\", null, \"Pre-commit checks run after staging your changes and running git commit and before a commit is completed. If the checks fail then the commit is not made and an error shown, while if all checks pass the commit is made as normal.\"), mdx(\"h2\", {\n    \"id\": \"lint-stage\"\n  }, \"lint-stage\"), mdx(\"p\", null, \"Then I found \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/okonet/lint-staged\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"lint-stage\"), \", which seem to be exactly what I wanted.\"), mdx(\"h3\", {\n    \"id\": \"setup\"\n  }, \"Setup\"), mdx(\"p\", null, \"running:\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npx mrm lint-staged\")), mdx(\"p\", null, \"is the quickest way to get it running. This will install husky and lint-staged, then add a configuration to the project\\u2019s package.json that will automatically format supported files in a pre-commit hook.\"), mdx(\"p\", null, \"This will automatically to you package.json for you.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"  \\\"husky\\\": {\\n    \\\"hooks\\\": {\\n      \\\"pre-commit\\\": \\\"lint-staged\\\"\\n    }\\n  },\\n  \\\"lint-staged\\\": {\\n    \\\"*.{js,css,md}\\\": \\\"prettier --write\\\"\\n  }\\n\")), mdx(\"p\", null, \"you need to have eslint and/or prettier installed\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npx install-peerdeps --dev eslint-config-airbnb\"), \" - airbnb is the gold standard of javascript linting rules\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install -D eslint-config-prettier eslint-plugin-prettier\"), \"\\nCreate .eslintrc.json file in your project\\u2019s root directory:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"{\\n  \\\"extends\\\": [\\\"airbnb\\\", \\\"prettier\\\"],\\n  \\\"plugins\\\": [\\\"prettier\\\"],\\n  \\\"rules\\\": {\\n    \\\"prettier/prettier\\\": [\\\"error\\\"]\\n  }\\n}\\n\\n\")), mdx(\"p\", null, \"before running the above commands. It will then set up your package.json for you :)\"), mdx(\"h3\", {\n    \"id\": \"commit-code\"\n  }, \"Commit code\"), mdx(\"p\", null, \"When committing code the hook with automatically run and fix any linting errors\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"xxx@xxx techblog % git commit -m \\\"staged-lint\\\"\\nhusky > pre-commit (node v12.13.1)\\n  \\u2714 Preparing...\\n  \\u2714 Running tasks...\\n  \\u2714 Applying modifications...\\n  \\u2714 Cleaning up...\\n[master 4080f84] staged-lint\\n 5 files changed, 57 insertions(+), 50 deletions(-)\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","hero":{"full":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCBAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABkzWtkw5fF//EABwQAAICAgMAAAAAAAAAAAAAAAEDAgQAEBESIf/aAAgBAQABBQJaELycQ1RHBR5q7HrZ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/ATF//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/ARV//8QAHRAAAgIBBQAAAAAAAAAAAAAAABEBAhASIUFRUv/aAAgBAQAGPwLU2vRNe4EVxK53P//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyFK1u3JNpzE1iIi2YYAE+vuBXYXgpH/2gAMAwEAAgADAAAAEJ8P/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EFqCP//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAgEBPxCg5//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFRMXGBwdH/2gAIAQEAAT8QvUF7GgiBRMDBpPNMJ2nQ0kMEBe5HAqc4zG0UIml5+z//2Q==","aspectRatio":1.5031847133757963,"src":"/static/d57929dba69e7fb76cb082c6fa5fca21/58fe7/banking-business-checklist-commerce-416322.jpg","srcSet":"/static/d57929dba69e7fb76cb082c6fa5fca21/e0f30/banking-business-checklist-commerce-416322.jpg 236w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/86afd/banking-business-checklist-commerce-416322.jpg 472w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/58fe7/banking-business-checklist-commerce-416322.jpg 944w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/02748/banking-business-checklist-commerce-416322.jpg 1416w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/5c241/banking-business-checklist-commerce-416322.jpg 1888w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/5bdee/banking-business-checklist-commerce-416322.jpg 3456w","srcWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/99fbb/banking-business-checklist-commerce-416322.webp","srcSetWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/77392/banking-business-checklist-commerce-416322.webp 236w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/1f177/banking-business-checklist-commerce-416322.webp 472w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/99fbb/banking-business-checklist-commerce-416322.webp 944w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/4a492/banking-business-checklist-commerce-416322.webp 1416w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/b0b8f/banking-business-checklist-commerce-416322.webp 1888w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/fa3d3/banking-business-checklist-commerce-416322.webp 3456w","sizes":"(max-width: 944px) 100vw, 944px"},"regular":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCBAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABkzWtkw5fF//EABwQAAICAgMAAAAAAAAAAAAAAAEDAgQAEBESIf/aAAgBAQABBQJaELycQ1RHBR5q7HrZ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/ATF//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/ARV//8QAHRAAAgIBBQAAAAAAAAAAAAAAABEBAhASIUFRUv/aAAgBAQAGPwLU2vRNe4EVxK53P//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyFK1u3JNpzE1iIi2YYAE+vuBXYXgpH/2gAMAwEAAgADAAAAEJ8P/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EFqCP//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAgEBPxCg5//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFRMXGBwdH/2gAIAQEAAT8QvUF7GgiBRMDBpPNMJ2nQ0kMEBe5HAqc4zG0UIml5+z//2Q==","aspectRatio":1.4954128440366972,"src":"/static/d57929dba69e7fb76cb082c6fa5fca21/1dc0b/banking-business-checklist-commerce-416322.jpg","srcSet":"/static/d57929dba69e7fb76cb082c6fa5fca21/3a5ce/banking-business-checklist-commerce-416322.jpg 163w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/05730/banking-business-checklist-commerce-416322.jpg 327w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/1dc0b/banking-business-checklist-commerce-416322.jpg 653w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/f72c7/banking-business-checklist-commerce-416322.jpg 980w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/6e4a3/banking-business-checklist-commerce-416322.jpg 1306w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/5bdee/banking-business-checklist-commerce-416322.jpg 3456w","srcWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/0acdf/banking-business-checklist-commerce-416322.webp","srcSetWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/ac59e/banking-business-checklist-commerce-416322.webp 163w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/7660b/banking-business-checklist-commerce-416322.webp 327w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/0acdf/banking-business-checklist-commerce-416322.webp 653w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/75470/banking-business-checklist-commerce-416322.webp 980w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/68d47/banking-business-checklist-commerce-416322.webp 1306w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/fa3d3/banking-business-checklist-commerce-416322.webp 3456w","sizes":"(max-width: 653px) 100vw, 653px"},"narrow":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCBAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABkzWtkw5fF//EABwQAAICAgMAAAAAAAAAAAAAAAEDAgQAEBESIf/aAAgBAQABBQJaELycQ1RHBR5q7HrZ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/ATF//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/ARV//8QAHRAAAgIBBQAAAAAAAAAAAAAAABEBAhASIUFRUv/aAAgBAQAGPwLU2vRNe4EVxK53P//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyFK1u3JNpzE1iIi2YYAE+vuBXYXgpH/2gAMAwEAAgADAAAAEJ8P/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EFqCP//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAgEBPxCg5//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFRMXGBwdH/2gAIAQEAAT8QvUF7GgiBRMDBpPNMJ2nQ0kMEBe5HAqc4zG0UIml5+z//2Q==","aspectRatio":1.5,"src":"/static/d57929dba69e7fb76cb082c6fa5fca21/eaa58/banking-business-checklist-commerce-416322.jpg","srcSet":"/static/d57929dba69e7fb76cb082c6fa5fca21/5a3ee/banking-business-checklist-commerce-416322.jpg 114w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/41f8f/banking-business-checklist-commerce-416322.jpg 229w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/eaa58/banking-business-checklist-commerce-416322.jpg 457w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/c309b/banking-business-checklist-commerce-416322.jpg 686w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/e3008/banking-business-checklist-commerce-416322.jpg 914w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/5bdee/banking-business-checklist-commerce-416322.jpg 3456w","srcWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/15384/banking-business-checklist-commerce-416322.webp","srcSetWebp":"/static/d57929dba69e7fb76cb082c6fa5fca21/31fce/banking-business-checklist-commerce-416322.webp 114w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/e3e25/banking-business-checklist-commerce-416322.webp 229w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/15384/banking-business-checklist-commerce-416322.webp 457w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/0258d/banking-business-checklist-commerce-416322.webp 686w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/64ea2/banking-business-checklist-commerce-416322.webp 914w,\n/static/d57929dba69e7fb76cb082c6fa5fca21/fa3d3/banking-business-checklist-commerce-416322.webp 3456w","sizes":"(max-width: 457px) 100vw, 457px"},"seo":{"src":"/static/d57929dba69e7fb76cb082c6fa5fca21/0ff54/banking-business-checklist-commerce-416322.jpg"}}},"authors":[{"authorsPage":true,"bio":"Principal Cloud Engineer @DVLA.  <br/>\nAWS Certified Architech Professional.  I spend most of my time learning and playing with AWS. \n<br/><br/> Spoken on Yan Cui's <a href=\"https://realworldserverless.com/\">Real World Serverless Episode #9</a>\n<br/>\nand digileaders - <a href=\"https://week.digileaders.com/talks/cloud-adoption-at-dvla-successes-snares-and-pitfalls/\">Cloud adoption at DVLA - successes, snares and pitfalls</a>\n","id":"e9ab1f30-8dde-55ef-96e5-d508d0fc690f","name":"Chris Williams","featured":true,"social":[{"url":"https://twitter.com/chrilliams"},{"url":"https://github.com/chrilliams"}],"slug":"/authors/chris-williams","avatar":{"small":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAABAABAgUD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHtn1CV3I0gEPphN8Ks/8QAHRABAQACAgMBAAAAAAAAAAAAAgEAAwQSETEzQf/aAAgBAQABBQJvodfIiWOqnX9O6x77YXSpyD4nr9z/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/AUqi7//EABgRAAIDAAAAAAAAAAAAAAAAAAARARAx/9oACAECAQE/AZ2kI//EAB0QAAICAQUAAAAAAAAAAAAAAAARASECECAiMaH/2gAIAQEABj8CciS0sqZOvCVUEZNHLG9n/8QAGxABAQACAwEAAAAAAAAAAAAAAREAIRAxQZH/2gAIAQEAAT8hJuowE6PXDoEm6GJRSkdmW94Nxp8K5KPDB8DxQ2m+P//aAAwDAQACAAMAAAAQIwY+/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/ECVsQ4JZf//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBJiySo2L//xAAeEAEBAAMAAQUAAAAAAAAAAAABEQAhMVEQYYGx8P/aAAgBAQABPxAAvmmJiSitL4fRmo9gw7vIbqhao1cKkEv73KAtzYeMT0T22sknjeKyvDyz6XLWDAWbwDejuf/Z","aspectRatio":0.7647058823529411,"src":"/static/a8a8e78990904006d4d162ac067e6f84/fa1ea/chris-williams.jpg","srcSet":"/static/a8a8e78990904006d4d162ac067e6f84/afb2b/chris-williams.jpg 13w,\n/static/a8a8e78990904006d4d162ac067e6f84/7c20e/chris-williams.jpg 25w,\n/static/a8a8e78990904006d4d162ac067e6f84/fa1ea/chris-williams.jpg 50w,\n/static/a8a8e78990904006d4d162ac067e6f84/03612/chris-williams.jpg 75w,\n/static/a8a8e78990904006d4d162ac067e6f84/61cdf/chris-williams.jpg 100w,\n/static/a8a8e78990904006d4d162ac067e6f84/16018/chris-williams.jpg 3024w","srcWebp":"/static/a8a8e78990904006d4d162ac067e6f84/e7b2c/chris-williams.webp","srcSetWebp":"/static/a8a8e78990904006d4d162ac067e6f84/58718/chris-williams.webp 13w,\n/static/a8a8e78990904006d4d162ac067e6f84/74aad/chris-williams.webp 25w,\n/static/a8a8e78990904006d4d162ac067e6f84/e7b2c/chris-williams.webp 50w,\n/static/a8a8e78990904006d4d162ac067e6f84/ed320/chris-williams.webp 75w,\n/static/a8a8e78990904006d4d162ac067e6f84/66016/chris-williams.webp 100w,\n/static/a8a8e78990904006d4d162ac067e6f84/59944/chris-williams.webp 3024w","sizes":"(max-width: 50px) 100vw, 50px"},"medium":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAABAABAgUD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHtn1CV3I0gEPphN8Ks/8QAHRABAQACAgMBAAAAAAAAAAAAAgEAAwQSETEzQf/aAAgBAQABBQJvodfIiWOqnX9O6x77YXSpyD4nr9z/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/AUqi7//EABgRAAIDAAAAAAAAAAAAAAAAAAARARAx/9oACAECAQE/AZ2kI//EAB0QAAICAQUAAAAAAAAAAAAAAAARASECECAiMaH/2gAIAQEABj8CciS0sqZOvCVUEZNHLG9n/8QAGxABAQACAwEAAAAAAAAAAAAAAREAIRAxQZH/2gAIAQEAAT8hJuowE6PXDoEm6GJRSkdmW94Nxp8K5KPDB8DxQ2m+P//aAAwDAQACAAMAAAAQIwY+/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/ECVsQ4JZf//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBJiySo2L//xAAeEAEBAAMAAQUAAAAAAAAAAAABEQAhMVEQYYGx8P/aAAgBAQABPxAAvmmJiSitL4fRmo9gw7vIbqhao1cKkEv73KAtzYeMT0T22sknjeKyvDyz6XLWDAWbwDejuf/Z","aspectRatio":0.7575757575757576,"src":"/static/a8a8e78990904006d4d162ac067e6f84/61cdf/chris-williams.jpg","srcSet":"/static/a8a8e78990904006d4d162ac067e6f84/7c20e/chris-williams.jpg 25w,\n/static/a8a8e78990904006d4d162ac067e6f84/fa1ea/chris-williams.jpg 50w,\n/static/a8a8e78990904006d4d162ac067e6f84/61cdf/chris-williams.jpg 100w,\n/static/a8a8e78990904006d4d162ac067e6f84/59538/chris-williams.jpg 150w,\n/static/a8a8e78990904006d4d162ac067e6f84/fd013/chris-williams.jpg 200w,\n/static/a8a8e78990904006d4d162ac067e6f84/16018/chris-williams.jpg 3024w","srcWebp":"/static/a8a8e78990904006d4d162ac067e6f84/66016/chris-williams.webp","srcSetWebp":"/static/a8a8e78990904006d4d162ac067e6f84/74aad/chris-williams.webp 25w,\n/static/a8a8e78990904006d4d162ac067e6f84/e7b2c/chris-williams.webp 50w,\n/static/a8a8e78990904006d4d162ac067e6f84/66016/chris-williams.webp 100w,\n/static/a8a8e78990904006d4d162ac067e6f84/d9b14/chris-williams.webp 150w,\n/static/a8a8e78990904006d4d162ac067e6f84/6b183/chris-williams.webp 200w,\n/static/a8a8e78990904006d4d162ac067e6f84/59944/chris-williams.webp 3024w","sizes":"(max-width: 100px) 100vw, 100px"},"large":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAQFAwEC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAbmWKBV0WEFEe+K6pOLP/8QAHBABAQADAAMBAAAAAAAAAAAAAgEAAxESEzEy/9oACAEBAAEFAkoYNxdzYvIj9+3HvnA0XN4snzk7n//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQMBAT8BSqLkP//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8BbyEP/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAECECIDFBUf/aAAgBAQAGPwJmLukoMiiBx6YNUyxs/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFREEH/2gAIAQEAAT8hRaCU3havy/Q7mOqkqlxWZX4EcaFGBgAPt6l0T88FsiAcn//aAAwDAQACAAMAAAAQm8uw/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAREP/aAAgBAwEBPxAkbEOCcf/EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBByySo2L//xAAeEAEAAgICAwEAAAAAAAAAAAABABEhQTFREIGR0f/aAAgBAQABPxC8k2BDitim1eK9FPYY7I68GRitn1BLsA9v5KxQruZeFGmwlVfyA94jNQjmaYMRa1r5BXhzP//Z","aspectRatio":0.7522935779816514,"src":"/static/a8a8e78990904006d4d162ac067e6f84/ec46e/chris-williams.jpg","srcSet":"/static/a8a8e78990904006d4d162ac067e6f84/a2637/chris-williams.jpg 82w,\n/static/a8a8e78990904006d4d162ac067e6f84/15203/chris-williams.jpg 164w,\n/static/a8a8e78990904006d4d162ac067e6f84/ec46e/chris-williams.jpg 328w,\n/static/a8a8e78990904006d4d162ac067e6f84/b69a5/chris-williams.jpg 492w,\n/static/a8a8e78990904006d4d162ac067e6f84/23a36/chris-williams.jpg 656w,\n/static/a8a8e78990904006d4d162ac067e6f84/16018/chris-williams.jpg 3024w","srcWebp":"/static/a8a8e78990904006d4d162ac067e6f84/5a48e/chris-williams.webp","srcSetWebp":"/static/a8a8e78990904006d4d162ac067e6f84/2d087/chris-williams.webp 82w,\n/static/a8a8e78990904006d4d162ac067e6f84/29d87/chris-williams.webp 164w,\n/static/a8a8e78990904006d4d162ac067e6f84/5a48e/chris-williams.webp 328w,\n/static/a8a8e78990904006d4d162ac067e6f84/42f2e/chris-williams.webp 492w,\n/static/a8a8e78990904006d4d162ac067e6f84/dec03/chris-williams.webp 656w,\n/static/a8a8e78990904006d4d162ac067e6f84/59944/chris-williams.webp 3024w","sizes":"(max-width: 328px) 100vw, 328px"}}}],"basePath":"/","permalink":"https://chrilliams.co.uk/using-linters-against-staged-git-files/","slug":"/using-linters-against-staged-git-files","id":"478ad046-228d-54b4-93c3-ecc63576d25c","title":"Using linters against staged git files","canonicalUrl":null,"mailchimp":"","next":[{"id":"82b5193a-74c9-5091-bbc1-548ac25bf687","slug":"/cloudformation-custom-resources-taking-hours-to-timeout","secret":false,"title":"Cloudformation custom resources taking hours to timeout","author":"Chris Williams","date":"February 4th, 2020","dateForSEO":"2020-02-04T00:00:00.000Z","timeToRead":1,"excerpt":"Using custom resources and the serverless framework to create AWS resources.","canonical_url":null,"subscription":true,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Cloudformation custom resources taking hours to timeout\",\n  \"author\": \"Chris Williams\",\n  \"date\": \"2020-02-04T00:00:00.000Z\",\n  \"hero\": \"./images/backpack-bag-blur-commuter-346768.jpg\",\n  \"excerpt\": \"Using custom resources and the serverless framework to create AWS resources.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I have spent ages during development waiting for cloudformation stacks to timeout because my code has errored,\\nand so a response is never sent. Very often I create a whole new stack with the serverless framework.\"), mdx(\"h3\", {\n    \"id\": \"what-is-a-custom-resource\"\n  }, \"What is a custom resource?\"), mdx(\"p\", null, \"In a CloudFormation template, you use the AWS::CloudFormation::CustomResource or Custom::String resource type to\\nspecify custom resources.\"), mdx(\"p\", null, \"Custom resources provide a way for you to write custom provisioning logic in CloudFormation template and\\nhave CloudFormation run it during a stack operation, such as when you create, update or delete a stack.\\nFor more information,\\nsee \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"Custom Resources\"), \".\"), mdx(\"p\", null, \"A watchdog timer (sometimes called a computer operating properly or COP timer, or simply a watchdog) is an electronic timer\\nthat is used to detect and recover from computer malfunctions. During normal operation, the computer regularly resets the\\nwatchdog timer to prevent it from elapsing, or \\u201Ctiming out\\u201D. If, due to a hardware fault or program error, the computer\\nfails to reset the watchdog, the timer will elapse and generate a timeout signal. The timeout signal is used to\\ninitiate corrective action or actions. The corrective actions typically include placing the computer system in a safe state\\nand restoring normal system operation.\"), mdx(\"p\", null, \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Watchdog_timer\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"https://en.wikipedia.org/wiki/Watchdog_timer\")), mdx(\"h3\", {\n    \"id\": \"when-to-timeout\"\n  }, \"When to timeout?\"), mdx(\"p\", null, \"Within a Lambda\\u2019s context you have access to context.getRemainingTimeInMillis(), which returns the number of milliseconds left before\\nthe execution times out. This is great because we can timeout and send a response to AWS Cloudformation before the execution timeout.\"), mdx(\"h4\", {\n    \"id\": \"example-function\"\n  }, \"Example Function\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"'use strict';\\nconst response = require('cfn-response-promise')\\n\\nconst handler = async function(event, context) {\\n  // Install watchdog timer as the first thing\\n  setupWatchdogTimer(event, context)\\n  console.log('REQUEST RECEIVED:\\\\n' + JSON.stringify(event))\\n  if (event.RequestType === 'Create') {\\n    console.log('CREATE!')\\n    // Put your custom create logic here\\n    await response.send(event, context, response.SUCCESS, { 'Message': 'Resource creation successful!' }, event.PhysicalResourceId);\\n    \\n  } else if (event.RequestType === 'Update') {\\n    console.log('UPDATE!')\\n    // Put your custom update logic here\\n    await response.send(event, context, response.SUCCESS, { 'Message': 'Resource update successful!' }, event.PhysicalResourceId);\\n\\n  } else if (event.RequestType === 'Delete') {\\n    console.log('DELETE!')\\n    // Put your custom delete logic here\\n    await response.send(event, context, response.SUCCESS, { 'Message': 'Resource deletion successful!'}, event.PhysicalResourceId);\\n\\n  } else {\\n    console.log('FAILED!')\\n    await response.send(event, context, response.FAILED, { 'Message': 'Resource request type not known!'}, event.PhysicalResourceId);\\n  }\\n  return await response.send(event, context, response.SUCCESS);\\n\\n};\\n\\nfunction setupWatchdogTimer (event, context) {\\n  const timeoutHandler = async () => {\\n    console.log('Timeout FAILURE!')\\n    // Emit event to 'sendResponse', then callback with an error from this\\n    // function\\n    return await response.send(event, context, response.SUCCESS);\\n  }\\n\\n  // Set timer so it triggers one second before this function would timeout\\n  setTimeout(timeoutHandler, context.getRemainingTimeInMillis() - 1000)\\n}\\n\\nmodule.exports.handler = handler;\\n\")), mdx(\"h3\", {\n    \"id\": \"cloudformation-runs-delete-after-an-amend\"\n  }, \"Cloudformation runs delete after an amend\"), mdx(\"p\", null, \"A very interesting and important thing to know is that CloudFormation compares the physical resource id you returned\\nby your Lambda function to the one you returned previously. If the IDs are different, CloudFormation assumes the\\nresource has been replaced with a new resource. Then something interesting happens.\"), mdx(\"p\", null, \"When the resource update logic completes successfully, a Delete request is sent with the old physical resource id.\\nIf the stack update fails and a rollback occurs, the new physical resource id is sent in the Delete event.\"), mdx(\"p\", null, \"If you don\\u2019t want this to happen its important to use the RESOURCEID carefully.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-nodejs\"\n  }), \"    await response.send(event, context, response.SUCCESS, { 'Message': 'Resource deletion successful!'}, RESOURCEID);\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","hero":{"full":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAQP/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABY6yGxSeYIf/EABkQAAMBAQEAAAAAAAAAAAAAAAECERIDMf/aAAgBAQABBQJXrd3oKinTPdA+/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwGH/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8Bp//EABkQAQEAAwEAAAAAAAAAAAAAAAEAECEiMf/aAAgBAQAGPwJVS03kdTj/xAAbEAACAwADAAAAAAAAAAAAAAAAARExQWFxgf/aAAgBAQABPyGcITxWXYlwbhkicMomgzu8P//aAAwDAQACAAMAAAAQ0B//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQBB/9oACAEDAQE/EBEXmWt3/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EEcRf//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcVFhgf/aAAgBAQABPxAbWevUc8ZEpfnJL+kenZyN3GoLGDhfcFVQinpINNi91U//2Q==","aspectRatio":1.5629139072847682,"src":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/58fe7/backpack-bag-blur-commuter-346768.jpg","srcSet":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/e0f30/backpack-bag-blur-commuter-346768.jpg 236w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/86afd/backpack-bag-blur-commuter-346768.jpg 472w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/58fe7/backpack-bag-blur-commuter-346768.jpg 944w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/02748/backpack-bag-blur-commuter-346768.jpg 1416w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/5c241/backpack-bag-blur-commuter-346768.jpg 1888w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/00aeb/backpack-bag-blur-commuter-346768.jpg 4896w","srcWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/99fbb/backpack-bag-blur-commuter-346768.webp","srcSetWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/77392/backpack-bag-blur-commuter-346768.webp 236w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/1f177/backpack-bag-blur-commuter-346768.webp 472w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/99fbb/backpack-bag-blur-commuter-346768.webp 944w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/4a492/backpack-bag-blur-commuter-346768.webp 1416w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/b0b8f/backpack-bag-blur-commuter-346768.webp 1888w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/0359e/backpack-bag-blur-commuter-346768.webp 4896w","sizes":"(max-width: 944px) 100vw, 944px"},"regular":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAQP/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABY6yGxSeYIf/EABkQAAMBAQEAAAAAAAAAAAAAAAECERIDMf/aAAgBAQABBQJXrd3oKinTPdA+/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwGH/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8Bp//EABkQAQEAAwEAAAAAAAAAAAAAAAEAECEiMf/aAAgBAQAGPwJVS03kdTj/xAAbEAACAwADAAAAAAAAAAAAAAAAARExQWFxgf/aAAgBAQABPyGcITxWXYlwbhkicMomgzu8P//aAAwDAQACAAMAAAAQ0B//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQBB/9oACAEDAQE/EBEXmWt3/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EEcRf//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcVFhgf/aAAgBAQABPxAbWevUc8ZEpfnJL+kenZyN3GoLGDhfcFVQinpINNi91U//2Q==","aspectRatio":1.5673076923076923,"src":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/1dc0b/backpack-bag-blur-commuter-346768.jpg","srcSet":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/3a5ce/backpack-bag-blur-commuter-346768.jpg 163w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/05730/backpack-bag-blur-commuter-346768.jpg 327w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/1dc0b/backpack-bag-blur-commuter-346768.jpg 653w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/f72c7/backpack-bag-blur-commuter-346768.jpg 980w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/6e4a3/backpack-bag-blur-commuter-346768.jpg 1306w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/00aeb/backpack-bag-blur-commuter-346768.jpg 4896w","srcWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/0acdf/backpack-bag-blur-commuter-346768.webp","srcSetWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/ac59e/backpack-bag-blur-commuter-346768.webp 163w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/7660b/backpack-bag-blur-commuter-346768.webp 327w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/0acdf/backpack-bag-blur-commuter-346768.webp 653w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/75470/backpack-bag-blur-commuter-346768.webp 980w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/68d47/backpack-bag-blur-commuter-346768.webp 1306w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/0359e/backpack-bag-blur-commuter-346768.webp 4896w","sizes":"(max-width: 653px) 100vw, 653px"},"narrow":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAQP/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABY6yGxSeYIf/EABkQAAMBAQEAAAAAAAAAAAAAAAECERIDMf/aAAgBAQABBQJXrd3oKinTPdA+/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwGH/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8Bp//EABkQAQEAAwEAAAAAAAAAAAAAAAEAECEiMf/aAAgBAQAGPwJVS03kdTj/xAAbEAACAwADAAAAAAAAAAAAAAAAARExQWFxgf/aAAgBAQABPyGcITxWXYlwbhkicMomgzu8P//aAAwDAQACAAMAAAAQ0B//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQBB/9oACAEDAQE/EBEXmWt3/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EEcRf//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcVFhgf/aAAgBAQABPxAbWevUc8ZEpfnJL+kenZyN3GoLGDhfcFVQinpINNi91U//2Q==","aspectRatio":1.5616438356164384,"src":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/eaa58/backpack-bag-blur-commuter-346768.jpg","srcSet":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/5a3ee/backpack-bag-blur-commuter-346768.jpg 114w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/41f8f/backpack-bag-blur-commuter-346768.jpg 229w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/eaa58/backpack-bag-blur-commuter-346768.jpg 457w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/c309b/backpack-bag-blur-commuter-346768.jpg 686w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/e3008/backpack-bag-blur-commuter-346768.jpg 914w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/00aeb/backpack-bag-blur-commuter-346768.jpg 4896w","srcWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/15384/backpack-bag-blur-commuter-346768.webp","srcSetWebp":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/31fce/backpack-bag-blur-commuter-346768.webp 114w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/e3e25/backpack-bag-blur-commuter-346768.webp 229w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/15384/backpack-bag-blur-commuter-346768.webp 457w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/0258d/backpack-bag-blur-commuter-346768.webp 686w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/64ea2/backpack-bag-blur-commuter-346768.webp 914w,\n/static/43f24cd7fb98fe35e5b8f17cde948ab4/0359e/backpack-bag-blur-commuter-346768.webp 4896w","sizes":"(max-width: 457px) 100vw, 457px"},"seo":{"src":"/static/43f24cd7fb98fe35e5b8f17cde948ab4/0ff54/backpack-bag-blur-commuter-346768.jpg"}}},{"id":"222e4678-cf78-5f31-a093-5c3d8c8ed526","slug":"/deploying-a-tech-blog-site","secret":false,"title":"Deploying a tech blog site","author":"Chris Williams","date":"February 2nd, 2020","dateForSEO":"2020-02-02T00:00:00.000Z","timeToRead":1,"excerpt":"Getting a blogging site up and running","canonical_url":null,"subscription":true,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Deploying a tech blog site\",\n  \"author\": \"Chris Williams\",\n  \"date\": \"2020-02-02T00:00:00.000Z\",\n  \"hero\": \"./images/blog-blocks-wallpaper-1591056.jpg\",\n  \"excerpt\": \"Getting a blogging site up and running\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"There are many way to host a static page live, and I have tried a number in the past. There are great services\\nlike Netlify, a S3 bucket, or AWS Amplify. I wanted something that cause be quickly deployed from a github repo and\\nghpages had be mentioned for blog sites, plus its completely free.\"), mdx(\"h3\", {\n    \"id\": \"github-pages\"\n  }, \"Github Pages\"), mdx(\"p\", null, \"GitHub Pages is a static site hosting service that takes HTML, CSS, and JavaScript files straight from a repository on GitHub,\\noptionally runs the files through a build process, and publishes a website.\"), mdx(\"p\", null, \"You can host your site on GitHub\\u2019s github.io domain or your own custom domain.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"if you haven\\u2019t already, create a github project and push your code\")), mdx(\"h4\", {\n    \"id\": \"configuring-the-github-pages-source-branch\"\n  }, \"Configuring the GitHub Pages source branch\"), mdx(\"p\", null, \"You must select which branch will be deployed from your repository settings in GitHub for GitHub Pages to function. On GitHub:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Navigate to your site\\u2019s repository.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Under the repository name, click Settings.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In the GitHub Pages section, use the Source drop-down to select master (for publishing to the root subdomain) or gh-pages (for publishing to a path like /docs) as your GitHub Pages publishing source.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Save.\")), mdx(\"h4\", {\n    \"id\": \"installing-the-gh-pages-package\"\n  }, \"Installing the gh-pages package\"), mdx(\"p\", null, \"The easiest way to push a Gatsby app to GitHub Pages is by using a package called gh-pages.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install gh-pages --save-dev\\n\")), mdx(\"p\", null, \"Then add a deploy script to package.json in your repository\\u2019s codebase:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"deploy\\\": \\\"gatsby build --prefix-paths && gh-pages -d public\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Then add this to the gatsby-config.js\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"module.exports = {\\n  pathPrefix: `/blog`,\\n}\\n\")), mdx(\"p\", null, \"Assuming that github was expecting the generated \\u2018public\\u2019 folder in source control. I was wrong.\"), mdx(\"p\", null, \"Running\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"  npm run deploy\\n\")), mdx(\"p\", null, \"created another branch called \\u2018gh-pages\\u2019 and updated the Github Pages source branch in the settings mentioned above.\"), mdx(\"p\", null, \"It great that the deploy just works; the build happens on the laptop and the public folder is uploaded to the gh-pages branch.\\nThe site is running at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://chrilliams.github.io/techblog/\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"https://chrilliams.github.io/techblog/\")), mdx(\"p\", null, \"If this doesn\\u2019t work, deployment information is available via environments in the github repo.\"));\n}\n;\nMDXContent.isMDXComponent = true;","hero":{"full":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABqfNMKIH/xAAXEAEBAQEAAAAAAAAAAAAAAAABAAIR/9oACAEBAAEFAs2jPGG7Lf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAARIDL/2gAIAQEABj8CNOf/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMVFh/9oACAEBAAE/IUTlc9EqVOQ2GjcyH//aAAwDAQACAAMAAAAQCy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABABExIWH/2gAIAQEAAT8QwgF6uFg0nAzz7sTcALBJP//Z","aspectRatio":1.5031847133757963,"src":"/static/7700bbd91f918983fa40f5fb270c1685/58fe7/blog-blocks-wallpaper-1591056.jpg","srcSet":"/static/7700bbd91f918983fa40f5fb270c1685/e0f30/blog-blocks-wallpaper-1591056.jpg 236w,\n/static/7700bbd91f918983fa40f5fb270c1685/86afd/blog-blocks-wallpaper-1591056.jpg 472w,\n/static/7700bbd91f918983fa40f5fb270c1685/58fe7/blog-blocks-wallpaper-1591056.jpg 944w,\n/static/7700bbd91f918983fa40f5fb270c1685/02748/blog-blocks-wallpaper-1591056.jpg 1416w,\n/static/7700bbd91f918983fa40f5fb270c1685/5c241/blog-blocks-wallpaper-1591056.jpg 1888w,\n/static/7700bbd91f918983fa40f5fb270c1685/175c5/blog-blocks-wallpaper-1591056.jpg 6016w","srcWebp":"/static/7700bbd91f918983fa40f5fb270c1685/99fbb/blog-blocks-wallpaper-1591056.webp","srcSetWebp":"/static/7700bbd91f918983fa40f5fb270c1685/77392/blog-blocks-wallpaper-1591056.webp 236w,\n/static/7700bbd91f918983fa40f5fb270c1685/1f177/blog-blocks-wallpaper-1591056.webp 472w,\n/static/7700bbd91f918983fa40f5fb270c1685/99fbb/blog-blocks-wallpaper-1591056.webp 944w,\n/static/7700bbd91f918983fa40f5fb270c1685/4a492/blog-blocks-wallpaper-1591056.webp 1416w,\n/static/7700bbd91f918983fa40f5fb270c1685/b0b8f/blog-blocks-wallpaper-1591056.webp 1888w,\n/static/7700bbd91f918983fa40f5fb270c1685/3546b/blog-blocks-wallpaper-1591056.webp 6016w","sizes":"(max-width: 944px) 100vw, 944px"},"regular":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABqfNMKIH/xAAXEAEBAQEAAAAAAAAAAAAAAAABAAIR/9oACAEBAAEFAs2jPGG7Lf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAARIDL/2gAIAQEABj8CNOf/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMVFh/9oACAEBAAE/IUTlc9EqVOQ2GjcyH//aAAwDAQACAAMAAAAQCy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABABExIWH/2gAIAQEAAT8QwgF6uFg0nAzz7sTcALBJP//Z","aspectRatio":1.5092592592592593,"src":"/static/7700bbd91f918983fa40f5fb270c1685/1dc0b/blog-blocks-wallpaper-1591056.jpg","srcSet":"/static/7700bbd91f918983fa40f5fb270c1685/3a5ce/blog-blocks-wallpaper-1591056.jpg 163w,\n/static/7700bbd91f918983fa40f5fb270c1685/05730/blog-blocks-wallpaper-1591056.jpg 327w,\n/static/7700bbd91f918983fa40f5fb270c1685/1dc0b/blog-blocks-wallpaper-1591056.jpg 653w,\n/static/7700bbd91f918983fa40f5fb270c1685/f72c7/blog-blocks-wallpaper-1591056.jpg 980w,\n/static/7700bbd91f918983fa40f5fb270c1685/6e4a3/blog-blocks-wallpaper-1591056.jpg 1306w,\n/static/7700bbd91f918983fa40f5fb270c1685/175c5/blog-blocks-wallpaper-1591056.jpg 6016w","srcWebp":"/static/7700bbd91f918983fa40f5fb270c1685/0acdf/blog-blocks-wallpaper-1591056.webp","srcSetWebp":"/static/7700bbd91f918983fa40f5fb270c1685/ac59e/blog-blocks-wallpaper-1591056.webp 163w,\n/static/7700bbd91f918983fa40f5fb270c1685/7660b/blog-blocks-wallpaper-1591056.webp 327w,\n/static/7700bbd91f918983fa40f5fb270c1685/0acdf/blog-blocks-wallpaper-1591056.webp 653w,\n/static/7700bbd91f918983fa40f5fb270c1685/75470/blog-blocks-wallpaper-1591056.webp 980w,\n/static/7700bbd91f918983fa40f5fb270c1685/68d47/blog-blocks-wallpaper-1591056.webp 1306w,\n/static/7700bbd91f918983fa40f5fb270c1685/3546b/blog-blocks-wallpaper-1591056.webp 6016w","sizes":"(max-width: 653px) 100vw, 653px"},"narrow":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABqfNMKIH/xAAXEAEBAQEAAAAAAAAAAAAAAAABAAIR/9oACAEBAAEFAs2jPGG7Lf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAARIDL/2gAIAQEABj8CNOf/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMVFh/9oACAEBAAE/IUTlc9EqVOQ2GjcyH//aAAwDAQACAAMAAAAQCy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABABExIWH/2gAIAQEAAT8QwgF6uFg0nAzz7sTcALBJP//Z","aspectRatio":1.5,"src":"/static/7700bbd91f918983fa40f5fb270c1685/eaa58/blog-blocks-wallpaper-1591056.jpg","srcSet":"/static/7700bbd91f918983fa40f5fb270c1685/5a3ee/blog-blocks-wallpaper-1591056.jpg 114w,\n/static/7700bbd91f918983fa40f5fb270c1685/41f8f/blog-blocks-wallpaper-1591056.jpg 229w,\n/static/7700bbd91f918983fa40f5fb270c1685/eaa58/blog-blocks-wallpaper-1591056.jpg 457w,\n/static/7700bbd91f918983fa40f5fb270c1685/c309b/blog-blocks-wallpaper-1591056.jpg 686w,\n/static/7700bbd91f918983fa40f5fb270c1685/e3008/blog-blocks-wallpaper-1591056.jpg 914w,\n/static/7700bbd91f918983fa40f5fb270c1685/175c5/blog-blocks-wallpaper-1591056.jpg 6016w","srcWebp":"/static/7700bbd91f918983fa40f5fb270c1685/15384/blog-blocks-wallpaper-1591056.webp","srcSetWebp":"/static/7700bbd91f918983fa40f5fb270c1685/31fce/blog-blocks-wallpaper-1591056.webp 114w,\n/static/7700bbd91f918983fa40f5fb270c1685/e3e25/blog-blocks-wallpaper-1591056.webp 229w,\n/static/7700bbd91f918983fa40f5fb270c1685/15384/blog-blocks-wallpaper-1591056.webp 457w,\n/static/7700bbd91f918983fa40f5fb270c1685/0258d/blog-blocks-wallpaper-1591056.webp 686w,\n/static/7700bbd91f918983fa40f5fb270c1685/64ea2/blog-blocks-wallpaper-1591056.webp 914w,\n/static/7700bbd91f918983fa40f5fb270c1685/3546b/blog-blocks-wallpaper-1591056.webp 6016w","sizes":"(max-width: 457px) 100vw, 457px"},"seo":{"src":"/static/7700bbd91f918983fa40f5fb270c1685/0ff54/blog-blocks-wallpaper-1591056.jpg"}}}]}},"staticQueryHashes":["1143375668","1491088328","1921650733","2068910035","2444214635"]}